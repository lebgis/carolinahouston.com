function createHomepageGoogleMap(a,b,c,d){setMapHeight();var e=google.maps.MapTypeId.ROADMAP;if(0==map_type?e=google.maps.MapTypeId.ROADMAP:1==map_type?(e=google.maps.MapTypeId.ROADMAP,mapStyles=""):2==map_type?(e=google.maps.MapTypeId.SATELLITE,mapStyles=""):3==map_type?(e=google.maps.MapTypeId.HYBRID,mapStyles=""):4==map_type&&(e=google.maps.MapTypeId.TERRAIN,mapStyles=""),null!=document.getElementById("map")){if(c.length>0){if("string"==typeof c)var f=jQuery.parseJSON(c);else var f=c;var j,g=new google.maps.LatLng(a,b),i=new google.maps.Map(document.getElementById("map"),{zoom:maps_zoom,scrollwheel:!1,center:g,mapTypeId:e,styles:mapStyles,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},streetViewControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},disableDefaultUI:1==is_mobile,zoomControl:!0,gestureHandling:"cooperative"}),k=[],l=d+"/img/marker.png";for(icon_marker&&(l=icon_marker),j=0;j<f.length;j++){var m=document.createElement("img");m.src=f[j].type,m.width="26",m.height="26";var n=document.createElement("div");infoboxOptions={content:n,disableAutoPan:!1,pixelOffset:new google.maps.Size(-100,0),zIndex:null,alignBottom:!0,boxClass:"infobox-wrapper",enableEventPropagation:!0,closeBoxMargin:"0px 0px -8px 0px",closeBoxURL:d+"/img/close-btn.png",infoBoxClearance:new google.maps.Size(1,1)};var o=new MarkerWithLabel({position:new google.maps.LatLng(f[j].lat,f[j].lng),map:i,icon:l,labelContent:m,labelAnchor:new google.maps.Point(50,0),labelClass:"marker-style"});k.push(o);var p="";p+='<div class="infobox-inner">',p+='<a href="'+f[j].link+'">',p+='<div class="infobox-image" style="position: relative">',p+=""!=f[j]["featured-image"]?'<img src="'+f[j]["featured-image"]+'">':'<img data-src="'+f[j]["holder-image"]+'">',p+='<div><span class="infobox-price">'+f[j].price+"</span></div>",p+="</div>",p+="</a>",p+='<div class="infobox-description">',p+='<div class="infobox-title"><a href="'+f[j].link+'">'+f[j].title+"</a></div>",p+='<div class="infobox-location">'+f[j].address+"</div>",p+="</div>",p+="</div>",n.innerHTML=p,k[j].infobox=new InfoBox(infoboxOptions),google.maps.event.addListener(o,"click",function(a,b){return function(){for(h=0;h<k.length;h++)k[h].infobox.close();k[b].infobox.open(i,this),setTimeout(function(){Holder.run()},1)}}(o,j))}var q=[{url:d+"/img/cluster.png",height:37,width:37}],r=new MarkerClusterer(i,k,{styles:q});r.onClick=function(a,b,c){return multiChoice(b,c,f)},$("body").addClass("loaded"),setTimeout(function(){$("body").removeClass("has-fullscreen-map")},1e3),$("#map").removeClass("fade-map")}$(".geo-location").on("click",function(){navigator.geolocation?($("#map").addClass("fade-map"),navigator.geolocation.getCurrentPosition(success,error)):error("Geo Location is not supported")})}}function success(a){createHomepageGoogleMap(a.coords.latitude,a.coords.longitude,ZonerGlobal.locations,ZonerGlobal.source_path)}function error(a){$("#map").removeClass("fade-map")}function initMap(a,b,c,d){if(0==ZonerGlobal.gm_or_osm){var e=0,f=$("#property-detail-map.float");document.documentElement.clientWidth>1200&&(e=.013),document.documentElement.clientWidth<1199&&(e=.006),document.documentElement.clientWidth<979&&(e=.001),document.documentElement.clientWidth<767&&(e=0);var g=new google.maps.LatLng(a,b);$("#property-detail-map").hasClass("float")&&(g=new google.maps.LatLng(a,b-e),f.css("width",f.width()+f.offset().left));var h=google.maps.MapTypeId.ROADMAP;0==map_type?h=google.maps.MapTypeId.ROADMAP:1==map_type?(h=google.maps.MapTypeId.ROADMAP,mapStyles=""):2==map_type?(h=google.maps.MapTypeId.SATELLITE,mapStyles=""):3==map_type?(h=google.maps.MapTypeId.HYBRID,mapStyles=""):4==map_type&&(h=google.maps.MapTypeId.TERRAIN,mapStyles="");var i={zoom:15,center:g,disableDefaultUI:!1,scrollwheel:!1,mapTypeId:h,styles:mapStyles,gestureHandling:"cooperative"},j=document.getElementById("property-detail-map"),k=new google.maps.Map(j,i),l=document.createElement("img");l.src=c,l.width="26",l.heigth="26";var m=new google.maps.LatLng(a,b),n=new MarkerWithLabel({position:m,map:k,icon:d,labelContent:l,labelAnchor:new google.maps.Point(50,0),labelClass:"marker-style"})}else{setMapHeight();var o="https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFuaW1pbGxzIiwiYSI6ImNpaHZ0dXFwYTAwNXd3MWtwcm5neTRjdDgifQ.Tm_WKZTI9vwh_phQn_LoKA",p='&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',q=L.tileLayer(o,{id:"mapbox.light",minZoom:0,maxZoom:20,attribution:p}),k=(L.tileLayer(o,{id:"mapbox.streets",minZoom:0,maxZoom:20,attribution:p}),L.map("property-detail-map",{center:[a,b],zoom:maps_zoom,scrollWheelZoom:!1,closeOnClick:!0,layers:[q]})),s=L.markerClusterGroup({showCoverageOnHover:!1}),t=L.divIcon({html:'<img width="26" height="26" src="'+c+'">',iconSize:[40,48],iconAnchor:[20,48],popupAnchor:[0,-48]}),n=L.marker(new L.LatLng(a,b),{title:"title",icon:t});s.addLayer(n),k.addLayer(s)}}function contactUsMap(){var a=new google.maps.LatLng(_latitude,_longitude);0==map_type?ggMapsTypes=google.maps.MapTypeId.ROADMAP:1==map_type?(ggMapsTypes=google.maps.MapTypeId.ROADMAP,mapStyles=""):2==map_type?(ggMapsTypes=google.maps.MapTypeId.SATELLITE,mapStyles=""):3==map_type?(ggMapsTypes=google.maps.MapTypeId.HYBRID,mapStyles=""):4==map_type&&(ggMapsTypes=google.maps.MapTypeId.TERRAIN,mapStyles="");var b={zoom:15,center:a,disableDefaultUI:!1,scrollwheel:!1,mapTypeId:ggMapsTypes,styles:mapStyles,gestureHandling:"cooperative"},c=document.getElementById("contact-map"),d=new google.maps.Map(c,b),e=source_path+"/img/marker.png";icon_marker&&(e=icon_marker);new MarkerWithLabel({position:a,map:d,icon:e,labelAnchor:new google.maps.Point(50,0),labelClass:"marker-style"})}function createHomepageOSM(a,b,c,d){function l(){$("#map").addClass("fade-map"),j.locate({setView:!0})}function m(){$("#map").removeClass("fade-map")}if(setMapHeight(),null!=document.getElementById("map")&&c.length>0){var e=jQuery.parseJSON(c),f="https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFuaW1pbGxzIiwiYSI6ImNpaHZ0dXFwYTAwNXd3MWtwcm5neTRjdDgifQ.Tm_WKZTI9vwh_phQn_LoKA",g='&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',h=L.tileLayer(f,{id:"mapbox.light",minZoom:0,maxZoom:20,attribution:g}),j=(L.tileLayer(f,{id:"mapbox.streets",minZoom:0,maxZoom:20,attribution:g}),L.map("map",{center:[a,b],zoom:maps_zoom,zoomControl:!1,scrollWheelZoom:!1,closeOnClick:!0,layers:[h],tap:!1}));1==is_mobile&&j.dragging.disable(),j.on("popupopen",function(a){Holder.run({domain:"galleryFrontEnd.holder",use_canvas:!0})});var k=L.markerClusterGroup({showCoverageOnHover:!1});new L.Control.Zoom({position:"bottomleft"}).addTo(j);for(var n=0;n<e.length;n++){var o=L.divIcon({html:'<img width="26" height="26" src="'+e[n].type+'">',iconSize:[40,48],iconAnchor:[20,48],popupAnchor:[0,-48]}),p=e[n].title,q=L.marker(new L.LatLng(e[n].lat,e[n].lng),{title:p,icon:o}),r='<img width="100%" data-src="galleryFrontEnd.holder/555x445?text='+pl_text_property+'" alt="" />';""!=e[n]["featured-image"]&&(r='<img width="100%" src="'+e[n]["featured-image"]+'">');var s="";s+='<div class="infobox-inner">',s+='<a href="'+e[n].link+'">',s+='<div class="infobox-image" style="position: relative">',s+=""!=e[n]["featured-image"]?'<img src="'+e[n]["featured-image"]+'">':'<img data-src="galleryFrontEnd.holder/555x445?auto=yes&text=Property">',s+='<div><span class="infobox-price">'+e[n].price+"</span></div>",s+="</div>",s+="</a>",s+='<div class="infobox-description">',s+='<div class="infobox-title"><a href="'+e[n].link+'">'+e[n].title+"</a></div>",s+='<div class="infobox-location">'+e[n].address+"</div>",s+="</div>",s+="</div>",q.bindPopup(s),k.addLayer(q)}j.addLayer(k),j.on("locationfound",m),$(".geo-location").on("click",function(){l()}),$("body").addClass("loaded"),setTimeout(function(){$("body").removeClass("has-fullscreen-map")},1e3),$("#map").removeClass("fade-map")}}function multiChoice(a,b){var c=is_agency_page,d=is_agent_page;$.ajax({url:ajaxurl,data:{action:"zoner_get_multiitems",sameLatitude:a,sameLongitude:b,isAgentAgencyPage:"1"==c||"1"==d},success:function(a){"1"==c||"1"==d?$("#map.agency-map").append('<div class="modal-window multichoice fade_in"></div>'):$("body").append('<div class="modal-window multichoice fade_in"></div>'),$(".modal-window").html(a)}}),$(".modal-window .modal-background, .modal-close").live("click",function(a){$(".modal-window").addClass("fade_out"),setTimeout(function(){$(".modal-window").remove()},300)})}var $=jQuery.noConflict(),mapStyles=[{featureType:"water",elementType:"all",stylers:[{hue:"#d7ebef"},{saturation:-5},{lightness:54},{visibility:"on"}]},{featureType:"landscape",elementType:"all",stylers:[{hue:"#eceae6"},{saturation:-49},{lightness:22},{visibility:"on"}]},{featureType:"poi.park",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-81},{lightness:34},{visibility:"on"}]},{featureType:"poi.medical",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-80},{lightness:-2},{visibility:"on"}]},{featureType:"poi.school",elementType:"all",stylers:[{hue:"#c8c6c3"},{saturation:-91},{lightness:-7},{visibility:"on"}]},{featureType:"landscape.natural",elementType:"all",stylers:[{hue:"#c8c6c3"},{saturation:-71},{lightness:-18},{visibility:"on"}]},{featureType:"road.highway",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-92},{lightness:60},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-81},{lightness:34},{visibility:"on"}]},{featureType:"road.arterial",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-92},{lightness:37},{visibility:"on"}]},{featureType:"transit",elementType:"geometry",stylers:[{hue:"#c8c6c3"},{saturation:4},{lightness:10},{visibility:"on"}]}];