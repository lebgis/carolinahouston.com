function success(a){ZonerGlobal.initSubmitMap(a.coords.latitude,a.coords.longitude)}var $=jQuery.noConflict(),mapStyles=[{featureType:"water",elementType:"all",stylers:[{hue:"#d7ebef"},{saturation:-5},{lightness:54},{visibility:"on"}]},{featureType:"landscape",elementType:"all",stylers:[{hue:"#eceae6"},{saturation:-49},{lightness:22},{visibility:"on"}]},{featureType:"poi.park",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-81},{lightness:34},{visibility:"on"}]},{featureType:"poi.medical",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-80},{lightness:-2},{visibility:"on"}]},{featureType:"poi.school",elementType:"all",stylers:[{hue:"#c8c6c3"},{saturation:-91},{lightness:-7},{visibility:"on"}]},{featureType:"landscape.natural",elementType:"all",stylers:[{hue:"#c8c6c3"},{saturation:-71},{lightness:-18},{visibility:"on"}]},{featureType:"road.highway",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-92},{lightness:60},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-81},{lightness:34},{visibility:"on"}]},{featureType:"road.arterial",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-92},{lightness:37},{visibility:"on"}]},{featureType:"transit",elementType:"geometry",stylers:[{hue:"#c8c6c3"},{saturation:4},{lightness:10},{visibility:"on"}]}];$(document).ready(function(){function o(){$.getJSON("http://nominatim.openstreetmap.org/search?format=json&limit=5&q="+$(l).val(),function(a){var b=[];$.each(a,function(a,c){bb=c.boundingbox,b.push("<li><a href='#' onclick='ZonerGlobal.osmChooseAddr("+bb[0]+", "+bb[2]+", "+bb[1]+", "+bb[3]+', "'+c.osm_type+'", "'+c.display_name+"\");return false;'>"+c.display_name+"</a></li>")}),$(n).empty(),0!=b.length?$("<ul/>",{class:"search-results",html:b.join("")}).appendTo("#results"):$("<p>",{html:"No results found"}).appendTo("#results"),$(n).show()})}if(0==ZonerGlobal.gm_or_osm){var a=[{featureType:"water",elementType:"all",stylers:[{hue:"#d7ebef"},{saturation:-5},{lightness:54},{visibility:"on"}]},{featureType:"landscape",elementType:"all",stylers:[{hue:"#eceae6"},{saturation:-49},{lightness:22},{visibility:"on"}]},{featureType:"poi.park",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-81},{lightness:34},{visibility:"on"}]},{featureType:"poi.medical",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-80},{lightness:-2},{visibility:"on"}]},{featureType:"poi.school",elementType:"all",stylers:[{hue:"#c8c6c3"},{saturation:-91},{lightness:-7},{visibility:"on"}]},{featureType:"landscape.natural",elementType:"all",stylers:[{hue:"#c8c6c3"},{saturation:-71},{lightness:-18},{visibility:"on"}]},{featureType:"road.highway",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-92},{lightness:60},{visibility:"on"}]},{featureType:"poi",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-81},{lightness:34},{visibility:"on"}]},{featureType:"road.arterial",elementType:"all",stylers:[{hue:"#dddbd7"},{saturation:-92},{lightness:37},{visibility:"on"}]},{featureType:"transit",elementType:"geometry",stylers:[{hue:"#c8c6c3"},{saturation:4},{lightness:10},{visibility:"on"}]}],b=ZonerEproperty._latitude,c=ZonerEproperty._longitude,d=parseInt(ZonerEproperty._single_zoom);ZonerEproperty._icon_marker;ZonerGlobal.initSubmitMap=function(b,c){var e=new google.maps.LatLng(b,c),f=google.maps.MapTypeId.ROADMAP;0==map_type?f=google.maps.MapTypeId.ROADMAP:1==map_type?(f=google.maps.MapTypeId.ROADMAP,a=""):2==map_type?(f=google.maps.MapTypeId.SATELLITE,a=""):3==map_type?(f=google.maps.MapTypeId.HYBRID,a=""):4==map_type&&(f=google.maps.MapTypeId.TERRAIN,a="");var g={zoom:d,center:e,disableDefaultUI:!1,mapTypeId:f,styles:a},h=document.getElementById("submit-map"),i=document.getElementById("search-location");$(i).keypress(function(a){if(13==a.keyCode)return a.preventDefault(),!1}),$("#submit-map").removeClass("fade-map");var j=new google.maps.Map(h,g),k=new MarkerWithLabel({position:e,map:j,icon:ZonerEproperty._icon_marker,labelAnchor:new google.maps.Point(50,0),draggable:!0}),l=new google.maps.places.Autocomplete(i);l.bindTo("bounds",j),google.maps.event.addListener(l,"place_changed",function(){var a=l.getPlace();a.geometry&&(a.geometry.viewport?j.fitBounds(a.geometry.viewport):(j.setCenter(a.geometry.location),j.setZoom(15)),k.setPosition(a.geometry.location),$("#latitude").val(k.getPosition().lat()),$("#longitude").val(k.getPosition().lng()))}),google.maps.event.addListener(k,"mouseup",function(a){this.position.lat(),this.position.lng();$("#latitude").val(this.position.lat()),$("#longitude").val(this.position.lng())})},google.maps.event.addDomListener(window,"load",ZonerGlobal.initSubmitMap(b,c))}else if($(".link-arrow.geo-location").remove(),setMapHeight(),null!=document.getElementById("submit-map")){var j,k,f="https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFuaW1pbGxzIiwiYSI6ImNpaHZ0dXFwYTAwNXd3MWtwcm5neTRjdDgifQ.Tm_WKZTI9vwh_phQn_LoKA",g='&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',h=L.tileLayer(f,{id:"mapbox.light",minZoom:0,maxZoom:20,attribution:g}),j=(L.tileLayer(f,{id:"mapbox.streets",minZoom:0,maxZoom:20,attribution:g}),L.map("submit-map",{center:[40.7056308,-73.9780035],zoom:maps_zoom,scrollWheelZoom:!1,closeOnClick:!0,layers:[h]})),l=document.getElementById("search-location"),m=l.closest(".input-group");$('<div id="results"/>').insertAfter(m);var n=document.getElementById("results");ZonerGlobal.osmChooseAddr=function(a,b,c,d,e,f){var g=new L.LatLng(a,b),h=new L.LatLng(c,d),i=new L.LatLngBounds(g,h);if("node"==e)k=L.circle(g,25,{color:"green",fill:!1}).addTo(j),j.fitBounds(i),j.setZoom(18);else{new L.LatLng(a,d),new L.LatLng(c,b);j.fitBounds(i)}var o=L.markerClusterGroup({showCoverageOnHover:!1}),p=L.divIcon({html:'<img width="26" height="26" src="'+ZonerGlobal.source_path+'/img/empty.png">',iconSize:[40,48],iconAnchor:[20,48],popupAnchor:[0,-48]});markerLat=a+(c-a)/2,markerLng=b+(d-b)/2;var q=L.marker(new L.LatLng(markerLat,markerLng),{title:f,icon:p});o.addLayer(q),j.addLayer(o),document.getElementById("latitude").value=markerLat,document.getElementById("longitude").value=markerLng,$(n).hide()},l.addEventListener("keyup",function(){o()})}}),$(".geo-location").length>0&&$(".geo-location").on("click",function(){navigator.geolocation?($("#submit-map").addClass("fade-map"),navigator.geolocation.getCurrentPosition(success)):error(ZonerEproperty._error_text)}),$(document).ready(function(){function a(a){var b=a,c={action:"get_states_by_country",country:b};$.post(ZonerGlobal.ajaxurl,c,function(a){var b=$("#select-state"),c=$('#submit-state[type!="hidden"]');if(a){b.show();var d=c.find("option:selected").val();c.find("option").remove().end().append(a),d&&d.length&&c.find("option[value="+d+"]").attr("selected","selected"),c.selectpicker("show"),c.selectpicker("refresh")}else b.hide(),c.selectpicker("hide")})}$("#form-submit").length>0&&$("#form-submit").validate({submitHandler:function(a){return a.submit(),!1}}),$("#sortable-image-gallery").length>0&&($("#sortable-image-gallery").disableSelection(),$("#sortable-image-gallery").sortable({placeholder:"ui-SortPlaceHolder"})),$("#sortable-image-plans").length>0&&($("#sortable-image-plans").disableSelection(),$("#sortable-image-plans").sortable({placeholder:"ui-SortPlaceHolder"})),$(".sortable-gallery span.remove-prop").on("click",function(){return $(this).closest(".sortable").fadeOut("slow",function(){$(this).remove()}),!1}),$(".add-video").length>0&&$(".add-video").on("click",function(){var a={action:"get_input_video"};return $.post(ZonerGlobal.ajaxurl,a,function(a){$("#property-video-presentation .row.field-container").append(a)}),!1}),$(".remove-video").live("click",function(){return $(this).closest(".inner-fields").fadeOut("slow",function(){$(this).remove()}),!1}),$('#submit-country[type="hidden"]').length>0&&a($('#submit-country[type="hidden"]').val()),$("#submit-country").on("change",function(b){a($(this).val())}),0==$("#select-state option:selected").length&&$("#submit-country").change(),0==$("#submit-state").find("option").length&&($("#select-state").hide(),$("#submit-state").selectpicker("hide"))});